<div class="admin-container">
  <h1 class="admin-header"><%= t('rails_image_post_solution.admin.index.title') %></h1>

  <!-- Statistics -->
  <div class="admin-stats">
    <div class="stat-card">
      <div class="stat-label"><%= t('rails_image_post_solution.admin.index.stats.total') %></div>
      <div class="stat-value"><%= @stats[:total] %></div>
    </div>
    <div class="stat-card pending">
      <div class="stat-label"><%= t('rails_image_post_solution.admin.index.stats.pending') %></div>
      <div class="stat-value"><%= @stats[:pending] %></div>
    </div>
    <div class="stat-card confirmed">
      <div class="stat-label"><%= t('rails_image_post_solution.admin.index.stats.confirmed') %></div>
      <div class="stat-value"><%= @stats[:confirmed] %></div>
    </div>
    <div class="stat-card dismissed">
      <div class="stat-label"><%= t('rails_image_post_solution.admin.index.stats.dismissed') %></div>
      <div class="stat-value"><%= @stats[:dismissed] %></div>
    </div>
    <div class="stat-card reviewed">
      <div class="stat-label"><%= t('rails_image_post_solution.admin.index.stats.reviewed') %></div>
      <div class="stat-value"><%= @stats[:reviewed] %></div>
    </div>
  </div>

  <!-- Filters -->
  <div class="admin-filters">
    <%= link_to t('rails_image_post_solution.admin.index.filters.all'), rails_image_post_solution.admin_image_reports_path, class: "filter-btn #{'active' if @status_filter == 'all'}" %>
    <%= link_to t('rails_image_post_solution.admin.index.filters.pending'), rails_image_post_solution.admin_image_reports_path(status: 'pending'), class: "filter-btn #{'active' if @status_filter == 'pending'}" %>
    <%= link_to t('rails_image_post_solution.admin.index.filters.confirmed'), rails_image_post_solution.admin_image_reports_path(status: 'confirmed'), class: "filter-btn #{'active' if @status_filter == 'confirmed'}" %>
    <%= link_to t('rails_image_post_solution.admin.index.filters.dismissed'), rails_image_post_solution.admin_image_reports_path(status: 'dismissed'), class: "filter-btn #{'active' if @status_filter == 'dismissed'}" %>
    <%= link_to t('rails_image_post_solution.admin.index.filters.reviewed'), rails_image_post_solution.admin_image_reports_path(status: 'reviewed'), class: "filter-btn #{'active' if @status_filter == 'reviewed'}" %>
  </div>

  <!-- Reports List -->
  <div class="admin-reports-list">
    <% if @reports.any? %>
      <table class="admin-table">
        <thead>
          <tr>
            <th><%= t('rails_image_post_solution.admin.index.table.image') %></th>
            <th><%= t('rails_image_post_solution.admin.index.table.reporter') %></th>
            <th><%= t('rails_image_post_solution.admin.index.table.reason') %></th>
            <th><%= t('rails_image_post_solution.admin.index.table.status') %></th>
            <th><%= t('rails_image_post_solution.admin.index.table.reported_at') %></th>
            <th><%= t('rails_image_post_solution.admin.index.table.reviewer') %></th>
            <th><%= t('rails_image_post_solution.admin.index.table.actions') %></th>
          </tr>
        </thead>
        <tbody>
          <% @reports.each do |report| %>
            <tr class="report-row status-<%= report.status %>">
              <td class="image-cell">
                <% if report.active_storage_attachment.present? %>
                  <%= image_tag url_for(report.active_storage_attachment), class: "admin-thumbnail", style: "max-width: 100px; max-height: 100px;" %>
                <% else %>
                  <span class="text-muted"><%= t('rails_image_post_solution.admin.index.deleted') %></span>
                <% end %>
              </td>
              <td>
                <% if report.user %>
                  <%= report.user.try(:display_name) || report.user.try(:name) || "Unknown" %>
                <% else %>
                  <span class="text-muted"><%= t('rails_image_post_solution.admin.index.system') %></span>
                <% end %>
              </td>
              <td class="reason-cell"><%= truncate(report.reason, length: 50) || t('rails_image_post_solution.admin.index.no_reason') %></td>
              <td>
                <span class="status-badge status-<%= report.status %>">
                  <%= t("rails_image_post_solution.image_report.statuses.#{report.status}") %>
                </span>
              </td>
              <td><%= l(report.created_at, format: :long) %></td>
              <td>
                <% if report.reviewed_by %>
                  <%= report.reviewed_by.try(:display_name) || report.reviewed_by.try(:name) || "Unknown" %>
                <% else %>
                  <span class="text-muted">-</span>
                <% end %>
              </td>
              <td class="actions-cell">
                <%= link_to t('rails_image_post_solution.admin.index.detail'), rails_image_post_solution.admin_image_report_path(report), class: "btn-action btn-detail" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% else %>
      <div class="empty-state">
        <p><%= t('rails_image_post_solution.admin.index.no_reports') %></p>
      </div>
    <% end %>
  </div>

  <div class="admin-actions">
    <%= link_to t('rails_image_post_solution.admin.index.back'), main_app.root_path, class: "btn btn-secondary" %>
  </div>
</div>
